{"version":3,"file":"ccu.js","sources":["src/ccu/ccu.js"],"sourcesContent":["class CCU {\n\t\n\n    constructor(ccuip) {\n\t   const CCUCommunication = require(__dirname + '/ccu_communication.js')\n\t   this.ccuIp = ccuip\n\t   this.communication = new CCUCommunication(this.ccuIp)\n\t   this.interfaces = []\n\t   this.devices = []\n\t   this.channels = []\n\t   this.dataPoints = []\n\t   this.variables = []\n\t}\n\t\n\tdeviceWithID(deviceId) {\n\t\tvar result;\n\t\tthis.devices.map(function (device){\n\t\t\tif (device.id==deviceId) {\n\t\t\t\tresult = device;\n\t\t\t}\n\t\t})\n\t\treturn result\n\t}\n\n\tdeviceWithAdress(deviceadress) {\n\t\tvar result;\n\t\tthis.devices.map(function (device){\n\t\t\tif (device.address==deviceadress) {\n\t\t\t\tresult = device;\n\t\t\t}\n\t\t})\n\t\treturn result\n\t}\n\t\n\tchannelWithID(channelId) {\n\t\tvar result;\n\t\tthis.channels.map(function (channel){\n\t\t\tif (channel.id==channelId) {\n\t\t\t\tresult = channel;\n\t\t\t}\n\t\t})\n\t\treturn result\n\t}\n\t\n\tinterfaceWithID(interfaceId) {\n\t\tvar result;\n\t\tthis.interfaces.map(function (ointerface){\n\t\t\tif (ointerface.id==interfaceId) {\n\t\t\t\tresult = ointerface;\n\t\t\t}\n\t\t})\n\t\treturn result\n\t}\n\t\n\tinterfaceWithName(interfaceName) {\n\t\tvar result;\n\t\tthis.interfaces.map(function (ointerface){\n\t\t\tif (ointerface.Name==interfaceName) {\n\t\t\t\tresult = ointerface;\n\t\t\t}\n\t\t})\n\t\treturn result\n\t}\n\t\n\tdatapointWithID(datapointId) {\n\t\tvar result;\n\t\tthis.dataPoints.map(function (datapoint){\n\t\t\tif (datapoint.id==datapointId) {\n\t\t\t\tresult = datapoint;\n\t\t\t}\n\t\t})\n\t\treturn result\n\t}\n\t\n\taddInterface(interf) {\n\t\tlet t_intf = this.interfaceWithID(interf.id)\n\t\tif (t_intf) {\n\t\t\tlet idx = this.interfaces.indexOf(interf)\n\t\t\tthis.interfaces.slice(idx)\n\t\t}\n\t\tthis.interfaces.push(interf)\n\t}\n\t\n\taddChannel(channel) {\n\t\t// remove old channel\n\t\tlet t_channel = this.channelWithID(channel.id)\n\t\tif (t_channel) {\n\t\t\tlet idx = this.channels.indexOf(t_channel)\n\t\t\tthis.channels.slice(idx)\n\t\t}\n\t\tthis.channels.push(channel)\n\t}\n\t\n\t\n\taddDatapoint(datapoint) {\n\t\t// remove old dp\n\t\tlet t_datapoint = this.datapointWithID(datapoint.id)\n\t\tif (t_datapoint) {\n\t\t\tlet idx = this.dataPoints.indexOf(t_datapoint)\n\t\t\tthis.dataPoints.slice(idx)\n\t\t}\n\t\tthis.dataPoints.push(datapoint)\n\t}\n\t\n\tsetHost(hostname) {\n\t   this.ccuIp = hostname\n\t   this.communication.ccuIp = hostname\n\t}\n\t\n\tloadRssiValues(callback) {\n\t\t// Make sure we have some Devices\t\n\t\tvar that = this\t\n\t\tif (this.devices.length==0) {\n\t\t\tthis.loadDevices(function(){\n\t\t\t\tthat.loadRssiValuesInt(callback)\n\t\t\t})\n\t\t} else {\n\t\t\tthis.loadRssiValuesInt(callback)\n\t\t}\n\t}\n\t\n\tloadRssiValuesInt(callback) {\n\n\t\tlet intf = {type:'BidCos-RF',\n\t\t\t\t\thost:this.ccuIp ,\n\t\t\t\t\tport:2001,\n\t\t\t\t\tpath:'/' }\n\t\tvar that = this\n\t\tthis.communication.sendInterfaceCommand(intf,'rssiInfo',[],function(error,result){\n\t\t\t\n\t\t\tif (!error) {\n\t\t\t\t\n\t\t\t\tvar adrs = Object.keys(result)\n\t\t\t\t\n\t\t\t\tadrs.map(function(devAdr){\n\t\t\t\t\tvar device = that.deviceWithAdress(devAdr)\n\t\t\t\t\tif (device) {\n\t\t\t\t\t\tdevice.rssi = []\n\t\t\t\t\t\tvar gate = result[devAdr]\n\t\t\t\t\t\tObject.keys(gate).map(function(gateAdr){\n\t\t\t\t\t\t\tvar info = gate[gateAdr]\n\t\t\t\t\t\t\tdevice.rssi.push({'p':gateAdr,'db_in':info[0],'db_out':info[1]})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tcallback(error)\n\t\t\t} else {\n\t\t\t\tcallback(error)\n\t\t\t}\n\t\t})\n\t}\n\t\n\tloadDutyCycle(callback) {\n\n\t\tlet intf = {type:'BidCos-RF',\n\t\t\t\t\thost:this.ccuIp ,\n\t\t\t\t\tport:2001,\n\t\t\t\t\tpath:'/' }\n\t\tvar that = this\n\t\tthis.communication.sendInterfaceCommand(intf,'listBidcosInterfaces',[],function(error,result){\n\t\t\t\n\t\t\tif (!error) {\n\t\t\t\tcallback(result)\n\t\t\t} else {\n\t\t\t\tcallback(error)\n\t\t\t}\n\t\t})\n\t}\n\t\n\t\n\tloadInterfaces(callback) {\n\t\tvar that = this\n\t\tlet script = 'string sifId;boolean df = true;Write(\\'{\"interfaces\":[\\');foreach(sifId, root.Interfaces().EnumIDs()){object oIf = dom.GetObject(sifId);if(df) {df = false;} else { Write(\\',\\');}Write(\\'{\\')'\n\n\t\tscript = script + this.scriptPartForElement('id','sifId',',');\n\t\tscript = script + this.scriptPartForElement('name','oIf.Name()',',');\n\t\tscript = script + this.scriptPartForElement('type','oIf.Type()',',');\n\t\tscript = script + this.scriptPartForElement('typename','oIf.TypeName()',',');\n\t\tscript = script + this.scriptPartForElement('info','oIf.InterfaceInfo()',',');\n\t\tscript = script + this.scriptPartForElement('url','oIf.InterfaceUrl()');\n\t\t\n\t\tscript = script +'Write(\\'}\\');} Write(\\']}\\');';\n\t\t\n\t\tthis.sendScript(script,function(result){\n\t\t\ttry {\n\t\t\t\tlet json = JSON.parse(result)\n\t\t\t\tjson.interfaces.map(function(interfc){\n\t\t\t\t\tthat.addInterface(interfc)\n\t\t\t\t})\n\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\t\n\t}\n\t\n\tloadVariables(callback) {\n\t\tvar that = this\n\t\tlet script = 'string varid;boolean df = true;Write(\\'{\"variables\":[\\');foreach(varid, dom.GetObject(ID_SYSTEM_VARIABLES).EnumIDs()){object ovar = dom.GetObject(varid);if(df) {df = false;} else { Write(\\',\\');}Write(\\'{\\')'\n\t\t\n\t\tscript = script + this.scriptPartForElement('id','varid',',');\n\t\tscript = script + this.scriptPartForElement('name','ovar.Name()',',');\n\t\tscript = script + this.scriptPartForElement('dpInfo','ovar.DPInfo()',',');\n\t\tscript = script + this.scriptPartForElement('unerasable','ovar.Unerasable()',',');\n\t\tscript = script + this.scriptPartForElement('valuetype','ovar.ValueType()',',');\n\t\tscript = script + this.scriptPartForElement('subtype','ovar.ValueSubType()',',');\n\t\tscript = script + this.scriptPartForElement('unit','ovar.ValueUnit()',',');\n\t\tscript = script + this.scriptPartForElement('valname0','ovar.ValueName0()',',');\n\t\tscript = script + this.scriptPartForElement('valname1','ovar.ValueName1()',',');\n\t\tscript = script + this.scriptPartForElement('vallist','ovar.ValueList()',',');\n\t\tscript = script + this.scriptPartForElement('min','ovar.ValueMin()',',');\n\t\tscript = script + this.scriptPartForElement('max','ovar.ValueMax()',',');\n\t\tscript = script + this.scriptPartForElement('chnl','ovar.Channel()');\n\t\t\n\t\tscript = script +'Write(\\'}\\');} Write(\\']}\\');';\n\t\t\n\t\tthis.sendScript(script,function(result){\n\t\t\ttry {\n\t\t\t\tlet json = JSON.parse(result)\n\t\t\t\tthat.variables = json.variables\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\n\t}\n\n\t\n\tloadDevices(callback) {\n\t\tvar that = this\n\t\tlet script = 'string sDeviceId;string sChannelId;boolean df = true;Write(\\'{\"devices\":[\\');foreach(sDeviceId, root.Devices().EnumIDs()){object oDevice = dom.GetObject(sDeviceId);if(oDevice){var oInterface = dom.GetObject(oDevice.Interface());if(df) {df = false;} else { Write(\\',\\');}Write(\\'{\\')'\n\t\t\n\t\t\n\t\tscript = script + this.scriptPartForElement('id','sDeviceId',',');\n\t\tscript = script + this.scriptPartForElement('name','oDevice.Name()',',');\n\t\tscript = script + this.scriptPartForElement('address','oDevice.Address()',',');\n\t\tscript = script + this.scriptPartForElement('type','oDevice.HssType()',',');\n\t\tscript = script + this.scriptPartForElement('creatingCompleted','oDevice.CreatingCompleted()',',');\n\t\tscript = script + this.scriptPartForElement('enabled','oDevice.Enabled()',',');\n\t\tscript = script + this.scriptPartForElement('internal','oDevice.Internal()',',');\n\t\tscript = script + this.scriptPartForElement('readyConfig','oDevice.ReadyConfig()',',');\n\t\tscript = script + this.scriptPartForElement('readyConfigChannels','oDevice.ReadyConfigChns()',',');\n\t\tscript = script + this.scriptPartForElement('locked','oDevice.Unerasable()',',');\n\t\tscript = script + this.scriptPartForElement('visible','oDevice.Visible()',',');\n\t\tscript = script + this.scriptPartForElement('used','oDevice.Used()');\n\n\t\tscript = script +'Write(\\'}\\');}}Write(\\']}\\');';\n\n\t\tthis.sendScript(script,function(result){\n\t\t\ttry {\n\t\t\t\tlet json = JSON.parse(result)\n\t\t\t\tthat.devices = json.devices\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\t\n\t}\n\t\n\tloadChannels(device,callback) {\n\t\t\n\t\tlet script = 'var oDevice = dom.GetObject(' + device.id +');string sChannelId;var oInterface = dom.GetObject(oDevice.Interface());Write(\\'{\"channels\": [\\');boolean bcf = true;foreach(sChannelId, oDevice.Channels().EnumIDs()){object oChannel = dom.GetObject(sChannelId);if(bcf) {bcf = false;} else {Write(\\',\\');}Write(\\'{\\');'\n\t\t\n\t\tscript = script + this.scriptPartForElement('id','sChannelId',',');\n\t\tscript = script + this.scriptPartForElement('name','oChannel.Name()',',');\n\t\tscript = script + 'if (oInterface) {'\n\t\tscript = script + this.scriptPartForElement('intf','oInterface.Name()',',');\n\t\tscript = script + this.scriptPartForElement('address','oInterface.Name() #\\'.\\'\\ # oChannel.Address()',',');\n\t\tscript = script + '}'\n\t\tscript = script + this.scriptPartForElement('type','oChannel.HssType()',',');\n\t\tscript = script + this.scriptPartForElement('access','oChannel.UserAccessRights(iulOtherThanAdmin)',',');\n\t\tscript = script + this.scriptPartForElement('enabled','oChannel.Enabled()');\n\t\t\n\t\tscript = script + 'Write(\\'}\\');}Write(\\']}\\');'\n\t\tvar that = this\n\t\tthis.sendScript(script,function(result){\n\t\t\ttry {\n\t\t\t\tlet json = JSON.parse(result)\n\t\t\t\tdevice.channels = json.channels\n\t\t\t\tjson.channels.map(function(channel){\n\t\t\t\t\tthat.addChannel(channel)\n\t\t\t\t})\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\t\n\t\t\n\t}\n\n\tloadDataPoints(channel,callback) {\n\t\t\n\t\tlet script = 'var oChannel = dom.GetObject(' + channel.id +');string sDpId;var oInterface = dom.GetObject(oChannel.Interface());Write(\\'{\"datapoints\": [\\');boolean bcf = true;foreach(sDpId, oChannel.DPs().EnumIDs()){object oDP = dom.GetObject(sDpId);if(bcf) {bcf = false;} else {Write(\\',\\');}Write(\\'{\\');'\n\t\t\n\t\tscript = script + this.scriptPartForElement('id','sDpId',',');\n\t\tscript = script + this.scriptPartForElement('name','oDP.Name()',',');\n\t\tscript = script + 'if (oInterface) {'\n\t\tscript = script + this.scriptPartForElement('intf','oInterface.Name()',',');\n\t\tscript = script + '}'\n\t\tscript = script + this.scriptPartForElement('type','oDP.TypeName()',',');\n\t\tscript = script + this.scriptPartForElement('operations','oDP.Operations()',',');\n\t\tscript = script + this.scriptPartForElement('valueType','oDP.ValueType()',',');\n\t\tscript = script + this.scriptPartForElement('valueUnit','oDP.ValueUnit().ToString()',',');\n\t\tscript = script + this.scriptPartForElement('archive','oDP.DPArchive()');\n\t\t\n\t\tscript = script + 'Write(\\'}\\');}Write(\\']}\\');'\n\t\tvar that = this\n\t\tthis.sendScript(script,function(result){\n\t\t\ttry {\n\t\t\t\tlet json = JSON.parse(result)\n\t\t\t\tchannel.datapoints = json.datapoints\n\t\t\t\tjson.datapoints.map(function (datapoint){\n\t\t\t\t\tthat.addDatapoint(datapoint)\n\t\t\t\t})\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\t\n\t\t\n\t}\n\n    testScript(script,callback) {\n\t    script = script.split('\\'').join('\\\\\\'');\n\t    let command = 'var tx = \\'' + script + '\\'; Write( system.SyntaxCheck(tx, \\'\\', \\'\\',\\'\\'));';\n\t    this.communication.sendRegaCommand(command,function(result,variables){\n\t\ttry {\n\t\t   if (callback) {\n\t\t\t\tcallback(result,variables)\n\t\t   }\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\n    }\n\n    sendScript(script,callback) {\n\t   \n\t   this.communication.sendRegaCommand(script,function(result,variables){\n\t\ttry {\n\t\t   if (callback) {\n\t\t\t\tcallback(result,variables)\n\t\t   }\n\t      } catch (e) {\n\t\t    console.error(e)\n\t\t  }\n\t\t})\t\t\n\t}\n\t\n\t\n\tsendScriptAndParseAll(script,callback) {   \n\t   this.sendScript(script,function(result,variables){\n\t\t   var parseString = require('xml2js').parseString;\n\t\t   parseString(variables, function (err, vresult) {\n\t \t\tcallback(result,vresult.xml)\n\t\t   })\n\t   })\n\t}\n\n \n\n\t\n\tscriptPartForElement(elementName,functionName,leadingComa='') {\n\t\treturn 'Write(\\'\"'+elementName+'\": \"\\' # '+functionName+' # \\'\"'+leadingComa+'\\');'\n\t}\n\t\n\t\n\tstrValueForOperations(operation) {\n\t\tvar result = ''\n\t\tif ((operation & 1)==1) {result = result + 'READ '}\n\t\tif ((operation & 2)==2) {result = result + 'WRITE '}\n\t\tif ((operation & 4)==4) {result = result + 'EVENT '}\n\t\treturn '(' + result + ')'\n\t}\n\n\tstrValueForValueType(valueType) {\n\t\tswitch (valueType) {\n\t\t\tcase '2' :\n\t\t\t\treturn '(ivtBinary)'\n\t\t\t\tbreak\n\t\t\tcase '4' : \n\t\t\t\treturn '(ivtFloat)'\n\t\t\t\tbreak\n\t\t\tcase '16' :\n\t\t\t\treturn '(ivtInteger)'\n\t\t\t\tbreak\n\t\t\tcase '20' :\n\t\t\t\treturn '(ivtString)'\n\t\t\t\tbreak\n\t\t}\n\t}\n\n}\n\nmodule.exports = CCU;"],"names":[],"mappings":"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"}