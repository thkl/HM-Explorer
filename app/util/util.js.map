{"version":3,"file":"util.js","sources":["src/util/util.js"],"sourcesContent":["function copyFileSync (srcFile, destFile, options) {\n  const overwrite = options.overwrite\n  const errorOnExist = options.errorOnExist\n  const preserveTimestamps = options.preserveTimestamps\n\n  const BUF_LENGTH = 64 * 1024\n  const _buff = buffer(BUF_LENGTH)\n  const fs = require('fs')\n\n  if (fs.existsSync(destFile)) {\n    if (overwrite) {\n      fs.unlinkSync(destFile)\n    } else if (errorOnExist) {\n      throw new Error(`${destFile} already exists`)\n    } else return\n  }\n\n  const fdr = fs.openSync(srcFile, 'r')\n  const stat = fs.fstatSync(fdr)\n  const fdw = fs.openSync(destFile, 'w', stat.mode)\n  let bytesRead = 1\n  let pos = 0\n\n  while (bytesRead > 0) {\n    bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos)\n    fs.writeSync(fdw, _buff, 0, bytesRead)\n    pos += bytesRead\n  }\n\n  if (preserveTimestamps) {\n    fs.futimesSync(fdw, stat.atime, stat.mtime)\n  }\n\n  fs.closeSync(fdr)\n  fs.closeSync(fdw)\n}\n\n\nfunction buffer(size) {\n\n  if (typeof Buffer.allocUnsafe === 'function') {\n    try {\n      return Buffer.allocUnsafe(size)\n    } catch (e) {\n      return new Buffer(size)\n    }\n  }\n  return new Buffer(size)\n}\n\nmodule.exports = {\n\t\n\tcopyFileSync:copyFileSync\n\t\n}"],"names":[],"mappings":";;AAAA,SAAS,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE;EACjD,MAAM,SAAS,GAAG,OAAO,CAAC,UAAS;EACnC,MAAM,YAAY,GAAG,OAAO,CAAC,aAAY;EACzC,MAAM,kBAAkB,GAAG,OAAO,CAAC,mBAAkB;;EAErD,MAAM,UAAU,GAAG,EAAE,GAAG,KAAI;EAC5B,MAAM,KAAK,GAAG,MAAM,CAAC,UAAU,EAAC;EAChC,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,EAAC;;EAExB,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;IAC3B,IAAI,SAAS,EAAE;MACb,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAC;KACxB,MAAM,IAAI,YAAY,EAAE;MACvB,MAAM,IAAI,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,eAAe,CAAC,CAAC;KAC9C,MAAM,MAAM;GACd;;EAED,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,EAAC;EACrC,MAAM,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,GAAG,EAAC;EAC9B,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,IAAI,EAAC;EACjD,IAAI,SAAS,GAAG,EAAC;EACjB,IAAI,GAAG,GAAG,EAAC;;EAEX,OAAO,SAAS,GAAG,CAAC,EAAE;IACpB,SAAS,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,GAAG,EAAC;IACvD,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,SAAS,EAAC;IACtC,GAAG,IAAI,UAAS;GACjB;;EAED,IAAI,kBAAkB,EAAE;IACtB,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC;GAC5C;;EAED,EAAE,CAAC,SAAS,CAAC,GAAG,EAAC;EACjB,EAAE,CAAC,SAAS,CAAC,GAAG,EAAC;CAClB;;;AAGD,SAAS,MAAM,CAAC,IAAI,EAAE;;EAEpB,IAAI,OAAO,MAAM,CAAC,WAAW,KAAK,UAAU,EAAE;IAC5C,IAAI;MACF,OAAO,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;KAChC,CAAC,OAAO,CAAC,EAAE;MACV,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC;KACxB;GACF;EACD,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC;CACxB;;AAED,MAAM,CAAC,OAAO,GAAG;;CAEhB,YAAY,CAAC,YAAY;;"}